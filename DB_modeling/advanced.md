# 정규화의 이해 (normalization)

DB 설계시 참조

- 중복되는 데이터 최소화
- 데이터의 불일치 해소
- 데이터의 무결성 확보

DB anomoly problem (이상문제)

- 삭제이상 : 연쇄 삭제에 의한 정보의 손실
- 삽입이상 : 원하지 않은 정보의 강제 삽입
- 갱신이상 : 중복데이터의 일부 갱신으로 정보의 모순성 발생
  -> 원인 : 속성들 간에 존재하는 여러 종속관계가 하나의 테이블에 존재
  -> 해결 : 속성들 간의 종속관계를 분석하여 여러개의 릴레이션으로 분해 (decomposition) = 정규화!

함수적 종속관계 : 어떠한 속성으로 인스턴스에 대한 정보를 얻을 수 잇는 것 (X -> Y)

- X -> Y = X를 알 경우, Y에 대한 정보를 알 수 있다
- 학번 -> 학년 = 학번을 알고 있을 경우, 학년을 알 수 있다
- 완전 함수 종속 : 하나의 집합으로 Y를 얻어냄
- 부분 함수 종속 : 오직 하나의 값으로 Y를 얻어낼 수 있는 것

Normalization process

- 주어진 테이블의 함수적 종속성 등의 종속 이론을 이용하여 잘못된 테이블 스키마를 보다 더 작으 속성의 세트로 나누어서 이상이 발생하지 않도록 하는 과정
- 제1정규형 (1NF)
  - 어떤 테이블에 속한 모든 도메인이 원작값 (atomic value)을 가져야 함
- 제2정규형 (2NF)
  - 제1정규형이면서, 키에 속하지 않은 속성 모두가 키에 완전 함수 종속으로 만듦
- 제3정규형 (3NF)
  - 제2정규형이면서, 모든 속성들이 기본키에 이행적 함수종속을 제외 -이행적 함수종속 : A -> B, A -> C인데, B -> C 관계가 성립하는 것
-

# 참조무결성의 이해

데이터 무결성 (data integrity)

- 데이터의 결함이 없는 상태
- update, delete 등 데이터 변경시, 무결성을 보장
- 일관되게 데이터를 유지하는 것
- 테이블 생성 시점에서 제약조건을 설정

- 엔티티 무결성 : unique인덱스, unique 제약 조건 또는 primary key 제약 조건을 통해 테이블의 기본 키나 식별자 열의 무결성을 강제 적용
- Entity 무결성, Domain 무결성, FK 무결성
- 도메인 무결성 : 특정 열에 대한 항목의 유효성
  - 데이터 형식을 통해 유형을 제한, check 제약 조건 및 규칙을 통해 형식을 제한
- 참조무결성 (main table과 refer table의 관계)
  - 행이 입력되거나 삭제될 때 테이블 간에 정의된 관계를 유지
  - 테이블에서 키 값의 일관성 유지
    - 기존 테이블에 연결된 행이 없을 경우, 관련 테이블에 행을 추가하거나 변경 불가
    - 관련 테이블에서 고아 행이 발생할 경우 (=관계가 존재하지 않을 경우), 기본 테이블의 값을 변경 불가
    - 일치하는 관련 행이 있을 경우, 기본 테이블에서 행을 삭제 불가
